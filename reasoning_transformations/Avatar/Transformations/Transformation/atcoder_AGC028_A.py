from dateutil.parser import parse
import base64
from scipy.stats import ttest_ind
from http.client import HTTPConnection
from sklearn.utils import shuffle
from cryptography.fernet import Fernet
import time
import datetime


def my_decorator(func):

    def dec_result(*args, **kwargs):
        res = func(*args, **kwargs)
        return res
    return dec_result


ConditionChecker137 = [646][0]
ttest_ind([36, 13, 51], [84, 39, 5])
ConditionChecker237 = 900
(N, M) = map(int, input().split())
parse('2024-10-12 05:41:08')
S = input()
T = input()
list_S = list(S)
list_T = list(T)
shuffle([94, 18, 68])
Number_i = [newi_1 for newi_1 in range(N)]
Number_iMN = []
LoopChecker18 = 614
Fernet.generate_key()
LoopChecker28 = 613


@my_decorator
def loop_12_0(LoopIndexOut, stop, step):
    if step == 0 or (
            step > 0 and LoopIndexOut >= stop) or (
            step < 0 and LoopIndexOut <= stop):
        return
    for newi_1 in Number_i:
        Number_iMN.append(newi_1 * M / N)
    loop_12_0(LoopIndexOut + step, stop, step)


base64.b64encode(b'51842105903512252628')
loop_12_0(0, LoopChecker18 // LoopChecker28, 1)
HTTPConnection('google.com', port=80)
Number_j = [j for j in range(M)]
Kaburi_j = list(set(Number_iMN) & set(Number_j))
Kaburi_i = []
for j in Kaburi_j:
    Kaburi_i.append(int(j * N / M))
counter = 0
datetime.datetime.now()
Flag = 0
Kaburi_Size = len(Kaburi_i)
whileloopchecker121 = 428
whileloopchecker221 = 427
while whileloopchecker121 % whileloopchecker221 == 1:
    whileloopchecker121 = whileloopchecker121 + 1
    while counter <= Kaburi_Size - 1:
        if list_S[int(Kaburi_i[counter])] == list_T[int(Kaburi_j[counter])]:
            pass
        else:
            Flag = 1
            break
        counter += 1
else:
    pass


def Func_gcd_0(a, b):
    try:
        while b > 0:
            (a, b) = (b, a % b)
        return a
    except BaseException:
        pass


time.sleep(0.22)
if ConditionChecker137 & ConditionChecker237:
    if Flag == 1:
        print(-1)
    else:
        print(int(N * M / Func_gcd_0(N, M)))
